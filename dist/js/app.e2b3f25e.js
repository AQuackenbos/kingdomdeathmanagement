(function(e){function n(n){for(var a,r,s=n[0],c=n[1],u=n[2],d=0,l=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&l.push(i[r][0]),i[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);b&&b(n);while(l.length)l.shift()();return o.push.apply(o,u||[]),t()}function t(){for(var e,n=0;n<o.length;n++){for(var t=o[n],a=!0,r=1;r<t.length;r++){var s=t[r];0!==i[s]&&(a=!1)}a&&(o.splice(n--,1),e=c(c.s=t[0]))}return e}var a={},r={app:0},i={app:0},o=[];function s(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-25d1107e":"1460624d","chunk-2d23055d":"f0584e71","chunk-3a166d86":"af2b8a3c","chunk-4c9beef8":"b7456317","chunk-4e78c092":"4a6e3ad1","chunk-6e0cb52b":"30645296","chunk-6d52b1d0":"f58e036a","chunk-8051deea":"d4a3522c","chunk-74d9d37c":"9078672e","chunk-858d335a":"e0a9cca4"}[e]+".js"}function c(n){if(a[n])return a[n].exports;var t=a[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,c),t.l=!0,t.exports}c.e=function(e){var n=[],t={"chunk-25d1107e":1,"chunk-3a166d86":1,"chunk-4c9beef8":1,"chunk-4e78c092":1,"chunk-6e0cb52b":1,"chunk-6d52b1d0":1,"chunk-8051deea":1,"chunk-74d9d37c":1,"chunk-858d335a":1};r[e]?n.push(r[e]):0!==r[e]&&t[e]&&n.push(r[e]=new Promise((function(n,t){for(var a="css/"+({}[e]||e)+"."+{"chunk-25d1107e":"356c3158","chunk-2d23055d":"31d6cfe0","chunk-3a166d86":"af934bf7","chunk-4c9beef8":"53b8b1cd","chunk-4e78c092":"b06e3686","chunk-6e0cb52b":"1ae90e97","chunk-6d52b1d0":"95a28df1","chunk-8051deea":"6f424d78","chunk-74d9d37c":"9308ab09","chunk-858d335a":"5a121ab9"}[e]+".css",i=c.p+a,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var u=o[s],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===a||d===i))return n()}var l=document.getElementsByTagName("style");for(s=0;s<l.length;s++){u=l[s],d=u.getAttribute("data-href");if(d===a||d===i)return n()}var b=document.createElement("link");b.rel="stylesheet",b.type="text/css",b.onload=n,b.onerror=function(n){var a=n&&n.target&&n.target.src||i,o=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=a,delete r[e],b.parentNode.removeChild(b),t(o)},b.href=i;var m=document.getElementsByTagName("head")[0];m.appendChild(b)})).then((function(){r[e]=0})));var a=i[e];if(0!==a)if(a)n.push(a[2]);else{var o=new Promise((function(n,t){a=i[e]=[n,t]}));n.push(a[2]=o);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=s(e);var l=new Error;u=function(n){d.onerror=d.onload=null,clearTimeout(b);var t=i[e];if(0!==t){if(t){var a=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",l.name="ChunkLoadError",l.type=a,l.request=r,t[1](l)}i[e]=void 0}};var b=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(n)},c.m=e,c.c=a,c.d=function(e,n,t){c.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,n){if(1&n&&(e=c(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(c.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)c.d(t,a,function(n){return e[n]}.bind(null,a));return t},c.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(n,"a",n),n},c.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},c.p="/kingdomdeathmanagement/dist/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=n,u=u.slice();for(var l=0;l<u.length;l++)n(u[l]);var b=d;o.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"2b43":function(e,n,t){},"56d7":function(e,n,t){"use strict";t.r(n);t("e260"),t("e6cf"),t("cca6"),t("a79d");var a=t("2b0e"),r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("main",{attrs:{id:"app"}},[e.todos.length>0?t("b-message",{attrs:{type:"is-danger",title:"TODO LIST",size:"is-small"}},[e._v(" "+e._s(e.todos)+" ")]):e._e(),t("b-loading",{attrs:{"is-full-page":!0,"can-cancel":!1},model:{value:e.showLoading,callback:function(n){e.showLoading=n},expression:"showLoading"}}),t("Navigation"),t("div",{staticClass:"container"},[t("div",{staticClass:"columns"},[t("transition",{attrs:{appear:"",name:"fade",mode:"out-in"}},[t("router-view",{key:e.$route.fullPath})],1)],1)])],1)},i=[],o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return!e.showLoading&&e.user&&e.campaign?t("b-navbar",{attrs:{transparent:""}},[t("template",{slot:"start"},[t("b-navbar-item",{attrs:{tag:"router-link",to:{name:"Settlement"}}},[t("b-icon",{staticClass:"mr-2",attrs:{icon:"landmark"}}),e._v(" Settlement ")],1),t("b-navbar-item",{attrs:{tag:"router-link",to:{name:"Timeline"}}},[t("b-icon",{staticClass:"mr-2",attrs:{icon:"stream"}}),e._v(" Timeline ")],1),t("b-navbar-item",{attrs:{tag:"router-link",to:{name:"Survivors"}}},[t("b-icon",{staticClass:"mr-2",attrs:{icon:"user-injured"}}),e._v(" Survivors ")],1),t("b-navbar-item",{attrs:{tag:"router-link",to:{name:"Storage"}}},[t("b-icon",{staticClass:"mr-2",attrs:{icon:"box-open"}}),e._v(" Storage ")],1),t("b-navbar-item",{attrs:{tag:"router-link",to:{name:"Innovations"}}},[t("b-icon",{staticClass:"mr-2",attrs:{icon:"book"}}),e._v(" Innovations ")],1),t("b-navbar-item",{attrs:{tag:"router-link",to:{name:"Hunt"}}},[t("b-icon",{staticClass:"mr-2",attrs:{icon:"mountain"}}),e._v(" Hunt ")],1)],1),t("template",{slot:"end"},[e.user?t("b-dropdown",{attrs:{position:"is-bottom-left","append-to-body":"","trap-focus":"","aria-role":"menu"}},[t("b-button",{staticClass:"is-light navbar-item mr-1 mt-1",attrs:{slot:"trigger",size:"is-small",type:"is-info",role:"button","icon-left":"user-circle"},slot:"trigger"},[e._v(" "+e._s(e.user.displayName)+" ")]),t("b-dropdown-item",{attrs:{custom:"","aria-role":"menuitem"}},[e._v(" Logged in as: "),t("br"),e._v(" "+e._s(e.user.email)+" ")]),t("b-dropdown-item",{attrs:{custom:"","aria-role":"menuitem"}},[e._v(" Display Name: "),t("br"),e._v(" "+e._s(e.pubUser.displayName)+" ")]),t("hr",{staticClass:"dropdown-divider"}),t("b-dropdown-item",{attrs:{"aria-role":"menuitem"}},[t("router-link",{staticClass:"is-info",attrs:{to:"/"}},[t("span",{staticClass:"bl-lantern is-size-3 mx-1"}),e._v(" Change Campaign ")])],1),t("hr",{staticClass:"dropdown-divider"}),t("b-dropdown-item",{attrs:{"aria-role":"menuitem"},on:{click:e.promptUpdate}},[t("b-icon",{attrs:{icon:"edit"}}),e._v(" Update Display Name ")],1),t("b-dropdown-item",{attrs:{"aria-role":"menuitem"},on:{click:e.logout}},[t("b-icon",{attrs:{icon:"sign-out-alt"}}),e._v(" Logout ")],1)],1):e._e()],1)],2):e._e()},s=[],c=t("5530"),u=t("2f62"),d=t("dc59"),l={name:"Navigation",computed:Object(c["a"])({},Object(u["c"])(["user","pubUser"])),methods:Object(c["a"])(Object(c["a"])({},Object(u["b"])(["clearUser","setPubUser"])),{},{logout:function(){var e=this;d["b"].auth().signOut().then((function(){e.clearUser()})).catch((function(e){return console.log(e)}))},promptUpdate:function(){var e=this;this.$buefy.dialog.prompt({message:"Change your Display Name",inputAttrs:{placeholder:"Your name of choice",required:!0},required:!0,trapFocus:!0,confirmText:"Update",onConfirm:function(n){return e.updateName(n)}})},updateName:function(e){var n=this;this.pubUser.displayName=e,d["a"].collection("users").doc(this.user.uid).update({displayName:e}).then((function(e){console.log(e),n.setPubUser(n.pubUser)}))}})},b=l,m=t("0c7c"),p=Object(m["a"])(b,o,s,!1,null,null,null),f=p.exports,h={data:function(){return{todos:["Refactor Survivor Pick method","Finish Survivor Severe Injury area"]}},components:{Navigation:f}},g=h,v=(t("5c0b"),Object(m["a"])(g,r,i,!1,null,null,null)),k=v.exports,w=(t("45fc"),t("d3b7"),t("8c4f"));a["a"].use(w["a"]);var y=[{path:"/",name:"Home",component:function(){return t.e("chunk-74d9d37c").then(t.bind(null,"bb51"))}},{path:"/survivors",name:"Survivors",component:function(){return t.e("chunk-4e78c092").then(t.bind(null,"6aa8"))},meta:{requiresAuth:!0},children:[{path:":id"}]},{path:"/settlement",name:"Settlement",component:function(){return t.e("chunk-858d335a").then(t.bind(null,"e8ea"))},meta:{requiresAuth:!0}},{path:"/timeline",name:"Timeline",component:function(){return t.e("chunk-25d1107e").then(t.bind(null,"f67a"))},meta:{requiresAuth:!0}},{path:"/innovations",name:"Innovations",component:function(){return t.e("chunk-3a166d86").then(t.bind(null,"bec2"))},meta:{requiresAuth:!0}},{path:"/storage",name:"Storage",redirect:"/storage/resources",component:function(){return Promise.all([t.e("chunk-6e0cb52b"),t.e("chunk-6d52b1d0")]).then(t.bind(null,"1038"))},meta:{requiresAuth:!0},children:[{name:"tab-resources",path:"resources",component:function(){return Promise.all([t.e("chunk-6e0cb52b"),t.e("chunk-6d52b1d0")]).then(t.bind(null,"1038"))}},{name:"tab-gear",path:"gear",component:function(){return Promise.all([t.e("chunk-6e0cb52b"),t.e("chunk-6d52b1d0")]).then(t.bind(null,"1038"))}},{name:"tab-grids",path:"grids",component:function(){return Promise.all([t.e("chunk-6e0cb52b"),t.e("chunk-6d52b1d0")]).then(t.bind(null,"1038"))}}]},{path:"/grids/edit/:id",name:"Grid Edit",component:function(){return Promise.all([t.e("chunk-6e0cb52b"),t.e("chunk-8051deea")]).then(t.bind(null,"629f"))}},{path:"/hunt",name:"Hunt",component:function(){return t.e("chunk-2d23055d").then(t.bind(null,"ec9b"))},meta:{requiresAuth:!0},children:[{name:"Hunt Setup",path:"setup",component:function(){return t.e("chunk-4c9beef8").then(t.bind(null,"fa53"))}}]}],O=new w["a"]({mode:"history",base:"/kingdomdeathmanagement/dist/",routes:y});O.beforeEach((function(e,n,t){var a=e.matched.some((function(e){return e.meta.requiresAuth}));a?d["b"].auth().onAuthStateChanged((function(e){e?t():t("/")})):t()}));var S=O,_=(t("4160"),t("b64b"),t("3ca3"),t("159b"),t("ddb0"),t("96cf"),t("1da1")),j=t("3317"),C=t("0e44");a["a"].use(u["a"]);var A={isBinding:!1,user:null,users:[],pubUser:null,showLoading:!0,loadingText:null,currentCampaignId:null,campaign:null,innovations:[],innovated:[],keywords:[],survivors:[],resources:[],gear:[],grids:[],timeline:[],showdowns:[],quarries:[],armorSets:[],locations:[],hunts:[]},I=function(){var e=Object.keys(A),n={};return e.forEach((function(e){n[e]=function(n){return n[e]}})),n},T=new u["a"].Store({plugins:[Object(C["a"])({storage:window.sessionStorage})],state:A,getters:I(),mutations:Object(c["a"])(Object(c["a"])({},j["b"]),{},{CLEAR_BINDING:function(e){e.isBinding=!1},SET_USER:function(e,n){e.user=n},SET_LOADING:function(e,n){e.showLoading=n},SET_PUBUSER:function(e,n){e.pubUser=n},SET_CAMPAIGN_ID:function(e,n){e.currentCampaignId=n},SET_LOADING_TEXT:function(e,n){e.loadingText=n}}),actions:{initFlag:function(e){var n=e.commit;n("CLEAR_BINDING")},setUser:function(e,n){var t=e.commit,a=e.dispatch;n&&(t("SET_USER",n),a("bindUsers"),a("bindPubUser"),a("bindKeywords"),a("bindInnovations"),a("bindQuarries"),a("bindShowdowns"),a("bindLocations"),a("bindArmorSets"))},setLoading:function(e,n){var t=e.commit,a=e.state;a.isBinding||null!==n&&t("SET_LOADING",n)},setLoadingText:function(e,n){var t=e.commit;t("SET_LOADING_TEXT",n)},setCampaignId:function(e,n){var t=e.commit;t("SET_CAMPAIGN_ID",n)},clearUser:Object(j["a"])((function(e){var n=e.unbindFirestoreRef,t=e.commit;t("SET_USER",null),window.sessionStorage.clear(),n("pubUser")})),bindUsers:Object(j["a"])((function(e){var n=e.bindFirestoreRef;return n("users",d["a"].collection("users"))})),bindPubUser:Object(j["a"])((function(e){var n=e.state,t=e.bindFirestoreRef;return t("pubUser",d["a"].collection("users").doc(n.user.uid))})),bindCampaign:Object(j["a"])(function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(n,t){var a,r,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=n.bindFirestoreRef,r=n.dispatch,i=n.state,!i.isBinding){e.next=3;break}return e.abrupt("return");case 3:return r("setLoading",!0),i.isBinding=!0,r("setCampaignId",t),e.next=8,a("campaign",d["a"].collection("campaigns").doc(t)).then(Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Promise.all([r("bindSurvivors",t),r("bindInnovated",t),r("bindTimeline",t),r("bindResources",t),r("bindGear",t),r("bindGrids",t),r("bindHunts",t)]).finally((function(){i.isBinding=!1,r("setLoading",!1)}));case 1:case"end":return e.stop()}}),e)}))));case 8:return o=e.sent,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),bindSurvivors:Object(j["a"])((function(e,n){var t=e.bindFirestoreRef;return t("survivors",d["a"].collection("campaigns/".concat(n,"/survivors")))})),bindInnovated:Object(j["a"])((function(e,n){var t=e.bindFirestoreRef;return t("innovated",d["a"].collection("campaigns/".concat(n,"/innovations")))})),bindTimeline:Object(j["a"])((function(e,n){var t=e.bindFirestoreRef;return t("timeline",d["a"].collection("campaigns/".concat(n,"/timeline")))})),bindResources:Object(j["a"])((function(e,n){var t=e.bindFirestoreRef;return t("resources",d["a"].collection("campaigns/".concat(n,"/resources")))})),bindGear:Object(j["a"])((function(e,n){var t=e.bindFirestoreRef;return t("gear",d["a"].collection("campaigns/".concat(n,"/gear")))})),bindGrids:Object(j["a"])((function(e,n){var t=e.bindFirestoreRef;return t("grids",d["a"].collection("campaigns/".concat(n,"/grids")))})),bindHunts:Object(j["a"])((function(e,n){var t=e.bindFirestoreRef;return t("hunts",d["a"].collection("campaigns/".concat(n,"/hunts")))})),bindInnovations:Object(j["a"])((function(e){var n=e.bindFirestoreRef;return n("innovations",d["a"].collection("innovations"))})),bindKeywords:Object(j["a"])((function(e){var n=e.bindFirestoreRef;return n("keywords",d["a"].collection("keywords"))})),bindQuarries:Object(j["a"])((function(e){var n=e.bindFirestoreRef;return n("quarries",d["a"].collection("quarries"))})),bindShowdowns:Object(j["a"])((function(e){var n=e.bindFirestoreRef;return n("showdowns",d["a"].collection("showdowns"))})),bindArmorSets:Object(j["a"])((function(e){var n=e.bindFirestoreRef;return n("armorSets",d["a"].collection("armor_sets"))})),bindLocations:Object(j["a"])((function(e){var n=e.bindFirestoreRef;return n("locations",d["a"].collection("locations"))}))}}),E=t("0ff2"),L=(t("fb6a"),t("498a"),a["a"].mixin({computed:Object(c["a"])({},Object(u["c"])(["showLoading","campaign","currentCampaignId","isBinding","user"])),methods:Object(c["a"])(Object(c["a"])({},Object(u["b"])(["setLoading","setLoadingText","bindCampaign"])),{},{capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},normalize:function(e){return e.trim().toLowerCase()},parseBlock:function(e){return e?e.replaceAll("[A]",'<span class="bl-action"></span>').replaceAll("[M]",'<span class="bl-movement"></span>').replaceAll("[E]",'<span class="bl-endeavor"></span>').replaceAll("[S]",'<span class="bl-story-event"></span>').replaceAll("\n","<br />").replaceAll(/\{[0-9]+\}/g,(function(e){var n=parseInt(e.replaceAll("{","").replaceAll("}",""));return'<span class="armor-block"><span class="bl-armor"></span><span class="amount">'.concat(n,"</span></span>")})):""}}),created:function(){var e;!this.$store||!this.currentCampaignId||null!==(e=this.campaign)&&void 0!==e&&e.id||this.bindCampaign(this.currentCampaignId)}}),t("289d")),R=(t("5abe"),t("ecee")),U=t("c074"),N=t("ad3d");R["c"].add(U["a"]),a["a"].component("vue-fontawesome",N["a"]),a["a"].use(L["a"],{defaultIconComponent:"vue-fontawesome",defaultIconPack:"fas",customIconPacks:{fas:{sizes:{default:"lg","is-small":"1x","is-medium":"2x","is-large":"3x"},iconPrefix:""}}}),a["a"].use(E["a"]),a["a"].config.productionTip=!1,d["b"].auth().onAuthStateChanged((function(e){T.dispatch("setUser",e),T.dispatch("setLoading",!1)}));var P=new a["a"]({router:S,store:T,render:function(e){return e(k)}}).$mount("#app");P.$store.dispatch("initFlag")},"5c0b":function(e,n,t){"use strict";t("2b43")},dc59:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var a=t("260b");t.d(n,"b",(function(){return a["a"]}));t("ea7b"),t("000b"),t("e71f");var r={apiKey:"AIzaSyBmSsnVV-42ImI7NTs3l02H_-6WLl63CiA",authDomain:"kingdomdeathmanagement.firebaseapp.com",databaseURL:"https://kingdomdeathmanagement.firebaseio.com",projectId:"kingdomdeathmanagement",storageBucket:"kingdomdeathmanagement.appspot.com",messagingSenderId:"577246476472",appId:"1:577246476472:web:f19bf30a4700bd1baf5c4d",measurementId:"G-1VZ07JWF07"},i=a["a"].initializeApp(r);a["a"].analytics();i.auth();var o=i.firestore()}});
//# sourceMappingURL=app.e2b3f25e.js.map