(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["home"],{"25f0":function(e,t,n){"use strict";var r=n("6eeb"),a=n("825a"),i=n("d039"),s=n("ad6d"),o="toString",c=RegExp.prototype,l=c[o],u=i((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),d=l.name!=o;(u||d)&&r(RegExp.prototype,o,(function(){var e=a(this),t=String(e.source),n=e.flags,r=String(void 0===n&&e instanceof RegExp&&!("flags"in c)?s.call(e):n);return"/"+t+"/"+r}),{unsafe:!0})},"38ea":function(e,t,n){},"460b":function(e,t,n){"use strict";n.d(t,"f",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"h",(function(){return u})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return r}));var r={active:!0,quarry:null,members:[],state:"setup"},a={expansions:[],active:!0,ended:!1,ending:{year:null,details:null},quarries:[],locations:[],year:0,survival:{max:1},bonuses:{departing:"",arriving:"",other:""},milestones:[{trigger:"First child is born",consequence:"Principle: New Life"},{trigger:"First time death count is updated",consequence:"Principle: Death"},{trigger:"Settlement has 5 innovations",consequence:"Hooded Knight"},{trigger:"Population reaches 15",consequence:"Principle: Society"},{trigger:"Population reaches 0",consequence:"Game Over"}],principles:{new_life:{name:"New Life",choices:["Protect the Young","Survival of the Fittest"],selected:null},death:{name:"Death",choices:["Cannibalize","Graves"],selected:null},society:{name:"Society",choices:["Collective Toil","Accept Darkness"],selected:null},conviction:{name:"Conviction",choices:["Barbaric","Romantic"],selected:null}}},i=["white_lion"],s=[{id:"language",deck:!0,innovated:!1,year:null}],o=["lantern_hoard"],c=[{name:"Returning Survivors",year:1},{name:"Endless Screams",year:2},{name:"Hands of Heat",year:5},{name:"Armored Strangers",year:6},{name:"Phoenix Feather",year:7},{name:"Regal Visit",year:11},{name:"Principle: Conviction",year:12},{name:"Watched",year:20}],l=[{name:"Butcher",level:1,year:4},{name:"King's Man",level:1,year:9},{name:"The Hand",level:1,year:13},{name:"Butcher",level:2,year:16},{name:"King's Man",level:2,year:19},{name:"Butcher",level:3,year:23},{name:"Watcher",level:0,year:25},{name:"King's Man",level:3,year:28},{name:"Gold Smoke Knight",level:0,year:30}],u={stats:{movement:{base:5,items:0,other:0,tokens:0},accuracy:{base:0,items:0,other:0,tokens:0},strength:{base:0,items:0,other:0,tokens:0},evasion:{base:0,items:0,other:0,tokens:0},luck:{base:0,items:0,other:0,tokens:0},speed:{base:0,items:0,other:0,tokens:0}},survival:{amount:0,abilities:{dodge:!1,encourage:!1,surge:!1,dash:!1,endure:!1},skipHunt:null},lifetime:{name:null,gender:null,experience:0,born:null,father:null,mother:null,died:null,cause:null,cannot:{fightingArts:!1,survival:!1,hunt:!1},reroll:{available:!1,used:!1},notes:null},defenses:{arms:{value:0,light:!1,heavy:!1,severe:[]},body:{value:0,light:!1,heavy:!1,severe:[]},brain:{value:0,light:!1},head:{value:0,heavy:!1,severe:[]},legs:{value:0,light:!1,heavy:!1,severe:[]},waist:{value:0,light:!1,heavy:!1,severe:[]}},abilities:{abilities:[],disorders:[],fightingArts:[],impairments:[]},mentality:{courage:{level:0,abilities:{stalwart:{name:"Stalwart",granted:!1,description:"Can't be knocked down by brain trauma or intimidate."},prepared:{name:"Prepared",granted:!1,description:"Add Hunt XP to your roll when determining a straggler."},matchmaker:{name:"Matchmaker",granted:!1,description:"Spend 1 endeavor to trigger intimacy story event."}}},understanding:{level:0,abilities:{analyze:{name:"Analyze",granted:!1,description:"Look at the top AI card and return it to the top of the deck."},explore:{name:"Explore",granted:!1,description:"Add +2 to your investigate roll results."},tinker:{name:"Tinker",granted:!1,description:"+1 endeavor when you are a returning survivor."}}}},weapon:{selected:null,proficiency:0}}},"5c15":function(e,t,n){"use strict";n("38ea")},"87ed":function(e,t,n){e.exports=n.p+"img/lantern.21453bec.png"},ad6d:function(e,t,n){"use strict";var r=n("825a");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},b0c0:function(e,t,n){var r=n("83ab"),a=n("9bf2").f,i=Function.prototype,s=i.toString,o=/^\s*function ([^ (]*)/,c="name";r&&!(c in i)&&a(i,c,{configurable:!0,get:function(){try{return s.call(this).match(o)[1]}catch(e){return""}}})},bb51:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.showLoading?e._e():r("div",{staticClass:"column is-12 is-centered"},[e.user?r("div",[r("h1",{staticClass:"title"},[e._v("Select a Campaign")]),r("CampaignList")],1):r("div",[r("img",{attrs:{alt:"Vue logo",src:n("87ed")}}),r("h1",{staticClass:"title"},[e._v("Kingdom Death Management")]),r("h2",{staticClass:"subtitle"},[e._v("Please Login to Continue")]),r("button",{staticClass:"button is-primary",on:{click:function(t){return t.preventDefault(),e.login(t)}}},[e._v("Login with Google")])])])},a=[],i=n("5530"),s=n("2f62"),o=n("dc59"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"columns is-multiline"},e._l(e.campaigns,(function(t){return n("div",{key:t.id,staticClass:"column is-4"},[n("div",{staticClass:"card campaign",on:{click:function(n){return n.preventDefault(),e.selectCampaign(t)}}},[n("header",{staticClass:"card-header"},[n("p",{staticClass:"card-header-title"},[e._v(" "+e._s(t.name)+" ")])]),n("div",{staticClass:"card-content"},[e._v(" Lantern Year "+e._s(t.year)+" "),n("br"),e._v(" "+e._s(t.members.length)+" Players ")])])])})),0),n("hr"),n("CampaignCreate")],1)},l=[],u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"buttons is-centered"},[n("b-button",{attrs:{size:"is-large","icon-left":"plus-circle",rounded:"",type:"is-primary is-light"},on:{click:function(t){return t.preventDefault(),e.getSettlementName(t)}}},[e._v(" Create New Campaign ")]),n("b-loading",{attrs:{"is-full-page":!0,"can-cancel":!1},model:{value:e.showProgress,callback:function(t){e.showProgress=t},expression:"showProgress"}},[n("b-progress",{attrs:{value:e.createProgressPercent,size:"is-large","show-value":""}},[e._v(" Creating Campaign: "+e._s(e.createProgressPercent)+"% "+e._s(e.progressLabel)+" ")])],1)],1)},d=[],g=(n("4160"),n("b0c0"),n("d3b7"),n("25f0"),n("3ca3"),n("159b"),n("ddb0"),n("96cf"),n("1da1")),m=n("460b"),h={name:"CampaignCreate",data:function(){return{createProgressPercent:0,createProgressItems:0,createProgressDone:0,showProgress:!1,progressLabel:""}},methods:{updateProgress:function(e){this.createProgressDone++,this.progressLabel=e,this.createProgressPercent=Math.round(this.createProgressDone/this.createProgressItems)},getSettlementName:function(){var e=this;this.$buefy.dialog.prompt({message:"Name your Settlement:",inputAttrs:{placeholder:"Settlement Name"},trapFocus:!0,onConfirm:function(t){return e.createCampaign(t)}})},createCampaign:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.createProgressPercent=0,t.createProgressDone=0,t.createProgressItems=42+m["f"].length+m["e"].length+m["b"].length+m["g"].length+m["d"].length,t.showProgress=!0,r=m["a"],r.name=e,r.members=[t.user.uid],a=o["a"].collection("campaigns").doc(),a.set(r).then((function(){return t.updateProgress("Creating core campaign data")})),n.next=11,t.populateCampaign(a);case 11:t.showProgress=!1,t.bindCampaign(a.id),t.$router.push({name:"Settlement"});case 14:case"end":return n.stop()}}),n)})))()},populateCampaign:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){var r,a,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:for(r=[],a={reached:!1,storyEvents:[],settlementEvents:[],showdowns:[],innovation:"",quarry:null,successful:!1},i=0;i<40;i++)console.log("Queueing timeline push: "+i.toString()),s=Object.assign({year:i},a),r.push(e.collection("timeline").doc(i.toString()).set(s).then((function(){return t.updateProgress("Instantiating timeline")})));return console.log("Pushing all years"),n.next=6,Promise.all(r);case 6:e.collection("timeline").doc("0").update({quarry:"White Lion (Prologue)"}),e.collection("timeline").doc("1").update({settlementEvents:o["b"].firestore.FieldValue.arrayUnion("First Story")}),m["f"].forEach((function(n){console.log("Adding Quarry: "+n),e.update({quarries:o["b"].firestore.FieldValue.arrayUnion(n)}).then((function(){return t.updateProgress("Adding quarries")}))})),m["e"].forEach((function(n){console.log("Adding location: "+n),e.update({locations:o["b"].firestore.FieldValue.arrayUnion(n)}).then((function(){return t.updateProgress("Adding locations")}))})),m["b"].forEach((function(n){console.log("Adding event: "+n.name),e.collection("timeline").doc(n.year.toString()).update({storyEvents:o["b"].firestore.FieldValue.arrayUnion(n.name)}).then((function(){return t.updateProgress("Adding default events")}))})),m["g"].forEach((function(n){console.log("Adding Showdown: "+n.name+n.level),e.collection("timeline").doc(n.year.toString()).update({showdowns:o["b"].firestore.FieldValue.arrayUnion({name:n.name,level:n.level})}).then((function(){return t.updateProgress("Adding default showdowns")}))})),m["d"].forEach((function(n){console.log("Adding innovation to deck: "+n.id),e.collection("innovations").doc(n.id).set({deck:n.deck,innovated:n.innovated,year:n.year}).then((function(){return t.updateProgress("Building innovation deck")}))}));case 13:case"end":return n.stop()}}),n)})))()}}},p=h,v=n("0c7c"),f=Object(v["a"])(p,u,d,!1,null,null,null),b=f.exports,y={name:"CampaignList",components:{CampaignCreate:b},data:function(){return{campaigns:[]}},computed:Object(i["a"])({},Object(s["c"])(["user"])),created:function(){var e=this.user.uid;this.$bind("campaigns",o["a"].collection("campaigns").where("members","array-contains",e))},methods:Object(i["a"])(Object(i["a"])({},Object(s["b"])(["bindCampaign"])),{},{selectCampaign:function(e){var t=this;this.bindCampaign(e.id).then((function(){t.$router.push({name:"Settlement"})}))}})},P=y,C=(n("5c15"),Object(v["a"])(P,c,l,!1,null,"23616dd2",null)),w=C.exports,k={name:"Home",components:{CampaignList:w},methods:Object(i["a"])(Object(i["a"])({},Object(s["b"])(["setUser","clearUser"])),{},{login:function(){var e=this,t=new o["b"].auth.GoogleAuthProvider;this.setLoading(!0),o["b"].auth().signInWithRedirect(t).then((function(t){e.setUser(t.user),e.setLoading(!1)})).catch((function(e){return console.log(e)}))}})},S=k,_=Object(v["a"])(S,r,a,!1,null,null,null);t["default"]=_.exports}}]);
//# sourceMappingURL=home.6266f06e.js.map