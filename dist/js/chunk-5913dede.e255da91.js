(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5913dede"],{"7db0":function(n,t,e){"use strict";var i=e("23e7"),a=e("b727").find,s=e("44d2"),o=e("ae40"),r="find",c=!0,l=o(r);r in[]&&Array(1)[r]((function(){c=!1})),i({target:"Array",proto:!0,forced:c||!l},{find:function(n){return a(this,n,arguments.length>1?arguments[1]:void 0)}}),s(r)},d414:function(n,t,e){"use strict";e("d429")},d429:function(n,t,e){},f67a:function(n,t,e){"use strict";e.r(t);var i=function(){var n=this,t=n.$createElement,e=n._self._c||t;return!n.loading&&n.user&&n.campaign?e("div",{staticClass:"column"},[e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-12"},[e("h1",{staticClass:"title"},[n._v("Lantern Year "+n._s(n.campaign.year))])])]),n._m(0),n._l(n.timeline,(function(t){return e("div",{key:t.id,ref:"year"+t.id,refInFor:!0,staticClass:"columns timeline-row",class:{current:t.year===n.campaign.year},staticStyle:{position:"relative"},on:{mouseover:function(e){n.activeRow=t.id},focus:function(e){n.activeRow=t.id}}},[e("div",{staticClass:"column is-1"},[n.campaign.year!==t.year&&n.activeRow===t.id?e("b-button",{attrs:{rounded:"",type:"is-info","icon-left":"calendar-check"},on:{click:function(e){return e.preventDefault(),n.changeYear(t.year)}}},[n._v(n._s(t.year))]):e("span",[n._v(n._s(t.year))])],1),e("div",{staticClass:"column is-2"},[n._l(t.storyEvents,(function(t,i){return e("div",{key:i},[e("span",{staticClass:"bl-story-event"}),n._v(" "+n._s(t)+" ")])})),n.activeRow===t.id?e("span",[e("b-button",{attrs:{type:"is-success","icon-right":"plus"},on:{click:function(e){return e.preventDefault(),n.addStoryEvent(t.id)}}})],1):n._e()],2),e("div",{staticClass:"column is-2"},[n._l(t.settlementEvents,(function(t,i){return e("div",{key:i},[e("span",{staticClass:"bl-settlement-event"}),n._v(" "+n._s(t)+" ")])})),n.activeRow===t.id?e("span",[e("b-button",{attrs:{type:"is-success","icon-right":"plus"},on:{click:function(e){return e.preventDefault(),n.addSettlementEvent(t.id)}}})],1):n._e()],2),e("div",{staticClass:"column is-2"},[n._l(t.showdowns,(function(t,i){return e("div",{key:i},[e("span",{staticClass:"bl-nemesis-event"}),n._v(" "+n._s(t.name)+" "),t.level>0?e("span",[n._v(" - Lvl "+n._s(t.level)+" ")]):n._e()])})),n.activeRow===t.id?e("span",[e("b-button",{attrs:{type:"is-success","icon-right":"plus"},on:{click:function(e){return e.preventDefault(),n.addShowdown(t.id)}}})],1):n._e()],2),e("div",{staticClass:"column is-2"},n._l(n.innovationsByYear[t.id],(function(t){return e("div",{key:t.id},[e("b-icon",{attrs:{icon:"flask","custom-size":"xs"}}),t.innovation?e("span",[n._v(n._s(t.innovation.name))]):e("span",[n._v(n._s(t.id))])],1)})),0),e("div",{staticClass:"column is-2"},[t.quarry?e("span",[e("div",[e("span",{staticClass:"bl-nemesis-event"}),n._v(" "),e("span",[n._v(n._s(t.quarry))])]),e("b-checkbox",{attrs:{size:"is-small",type:"is-info"},on:{input:function(e){return n.flagSuccess(t.id,e)}},model:{value:t.successful,callback:function(e){n.$set(t,"successful",e)},expression:"ly.successful"}},[n._v("Successful Hunt")])],1):n.activeRow===t.id?e("span",[e("b-field",[e("b-select",{attrs:{placeholder:"Quarry"},model:{value:n.selectingQuarry,callback:function(t){n.selectingQuarry=t},expression:"selectingQuarry"}},n._l(n.quarries,(function(t){return e("option",{key:t.id,domProps:{value:t.name}},[n._v(n._s(t.name))])})),0),e("b-select",{attrs:{placeholder:"Lv."},model:{value:n.sQLevel,callback:function(t){n.sQLevel=t},expression:"sQLevel"}},n._l([1,2,3],(function(t){return e("option",{key:t,domProps:{value:t}},[n._v(n._s(t))])})),0),e("b-button",{attrs:{type:"is-success","icon-right":"plus"},on:{click:function(e){return e.preventDefault(),n.confirmQuarry(t.id)}}})],1)],1):n._e()]),e("div",{staticClass:"column is-1"},[e("a",{staticClass:"bl-endeavor is-size-2",staticStyle:{color:"black"},on:{click:function(e){return e.preventDefault(),n.showEndeavors(t.id)}}})])])}))],2):n._e()},a=[function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"columns header"},[e("div",{staticClass:"column is-1"},[n._v("Year")]),e("div",{staticClass:"column is-2"},[n._v("Story and Special Events")]),e("div",{staticClass:"column is-2"},[n._v("Settlement Event")]),e("div",{staticClass:"column is-2"},[n._v("Special Showdown")]),e("div",{staticClass:"column is-2"},[n._v("Innovated")]),e("div",{staticClass:"column is-2"},[n._v("Quarry")]),e("div",{staticClass:"column is-1"},[n._v("Endeavors")])])}];e("4de4"),e("7db0"),e("4160"),e("caad"),e("c975"),e("a15b"),e("d81d"),e("d3b7"),e("ac1f"),e("25f0"),e("2532"),e("1276"),e("498a"),e("159b");function s(n){if(Array.isArray(n))return n}e("a4d3"),e("e01a"),e("d28b"),e("3ca3"),e("ddb0");function o(n,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(n)){var e=[],i=!0,a=!1,s=void 0;try{for(var o,r=n[Symbol.iterator]();!(i=(o=r.next()).done);i=!0)if(e.push(o.value),t&&e.length===t)break}catch(c){a=!0,s=c}finally{try{i||null==r["return"]||r["return"]()}finally{if(a)throw s}}return e}}var r=e("06c5");function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(n,t){return s(n)||o(n,t)||Object(r["a"])(n,t)||c()}var u=e("5530"),d=e("2f62"),v=e("dc59"),f={name:"Timeline",data:function(){return{campaign:null,timeline:[],allQuarries:[],activeRow:null,loadingComponents:{},selectingQuarry:null,innovations:[],sQLevel:null}},computed:Object(u["a"])(Object(u["a"])({},Object(d["c"])({loading:"loading",user:"user",currentCampaign:"currentCampaign"})),{},{quarries:function(){var n=this;return this.allQuarries.filter((function(t){return n.campaign.quarries.includes(t.id)}))},innovationsByYear:function(){var n=this;if(!this.innovations)return[];var t=this.innovations.map((function(n){return n.year})).filter((function(n,t,e){return e.indexOf(n)===t&&null!==n})),e={};return t.forEach((function(t){t in e||(e[t.toString()]=[]),n.innovations.filter((function(n){return n.year===t})).forEach((function(i){i.innovation=n.allInnovations.find((function(n){return i.id===n.id})),e[t.toString()].push(i)}))})),e}}),created:function(){this.$bind("campaign",v["a"].collection("campaigns").doc(this.currentCampaign)),this.$bind("timeline",v["a"].collection("campaigns/".concat(this.currentCampaign,"/timeline")).orderBy("year","asc")),this.$bind("allInnovations",v["a"].collection("innovations")),this.$bind("allQuarries",v["a"].collection("quarries")),this.$bind("innovations",v["a"].collection("campaigns/".concat(this.currentCampaign,"/innovations")))},methods:{setYearLoading:function(n,t){this.loadingComponents[n]||!t?t||(this.loadingComponents[n].close(),delete this.loadingComponents[n]):this.loadingComponents[n]=this.$buefy.loading.open({container:this.$refs["year"+n][0]})},addStoryEvent:function(n){var t=this;this.$buefy.dialog.prompt({message:"Add Story Event to Lantern Year "+n+":",inputAttrs:{required:!0},trapFocus:!0,onConfirm:function(e){t.setYearLoading(n,!0),v["a"].collection("campaigns/".concat(t.currentCampaign,"/timeline")).doc(n.toString()).update({storyEvents:v["b"].firestore.FieldValue.arrayUnion(e)}).then((function(){t.setYearLoading(n,!1)}))}})},addSettlementEvent:function(n){var t=this;this.$buefy.dialog.prompt({message:"Add Settlement Event to Lantern Year "+n+":",inputAttrs:{required:!0},trapFocus:!0,onConfirm:function(e){t.setYearLoading(n,!0),v["a"].collection("campaigns/".concat(t.currentCampaign,"/timeline")).doc(n.toString()).update({settlementEvents:v["b"].firestore.FieldValue.arrayUnion(e)}).then((function(){t.setYearLoading(n,!1)}))}})},addShowdown:function(n){var t=this;this.$buefy.dialog.prompt({message:"Add Showdown to Lantern Year "+n+': <p class="is-size-7">You can include a level separated by a colon (":").</p>',inputAttrs:{required:!0},trapFocus:!0,onConfirm:function(e){t.setYearLoading(n,!0);var i=e.trim().split(":"),a=l(i,2),s=a[0],o=a[1];o||(o=0),v["a"].collection("campaigns/".concat(t.currentCampaign,"/timeline")).doc(n.toString()).update({showdowns:v["b"].firestore.FieldValue.arrayUnion({name:s,level:o})}).then((function(){t.setYearLoading(n,!1)}))}})},confirmQuarry:function(n){var t=this;this.setYearLoading(n,!0),v["a"].collection("campaigns/".concat(this.currentCampaign,"/timeline")).doc(n.toString()).update({quarry:this.selectingQuarry+" Lv. "+this.sQLevel}).then((function(){t.selectingQuarry=null,t.sQLevel=null,t.setYearLoading(n,!1)}))},flagSuccess:function(n,t){var e=this;this.setYearLoading(n,!0),v["a"].collection("campaigns/".concat(this.currentCampaign,"/timeline")).doc(n.toString()).update({successful:t}).then((function(){e.setYearLoading(n,!1)}))},changeYear:function(n){var t=this;this.$buefy.dialog.confirm({message:"Change to Lantern Year "+n+"?",onConfirm:function(){v["a"].collection("campaigns").doc(t.currentCampaign).update({year:n})}})},showEndeavors:function(n){var t='<button data-v-e945440a="" type="button" class="button is-small circle-icon is-black is-rounded disabled"><span class="icon is-small"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="asterisk" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-asterisk fa-w-16 fa-1x"><path fill="currentColor" d="M478.21 334.093L336 256l142.21-78.093c11.795-6.477 15.961-21.384 9.232-33.037l-19.48-33.741c-6.728-11.653-21.72-15.499-33.227-8.523L296 186.718l3.475-162.204C299.763 11.061 288.937 0 275.48 0h-38.96c-13.456 0-24.283 11.061-23.994 24.514L216 186.718 77.265 102.607c-11.506-6.976-26.499-3.13-33.227 8.523l-19.48 33.741c-6.728 11.653-2.562 26.56 9.233 33.037L176 256 33.79 334.093c-11.795 6.477-15.961 21.384-9.232 33.037l19.48 33.741c6.728 11.653 21.721 15.499 33.227 8.523L216 325.282l-3.475 162.204C212.237 500.939 223.064 512 236.52 512h38.961c13.456 0 24.283-11.061 23.995-24.514L296 325.282l138.735 84.111c11.506 6.976 26.499 3.13 33.227-8.523l19.48-33.741c6.728-11.653 2.563-26.559-9.232-33.036z" class=""></path></svg></span></button>',e=this.timeline[n],i=e.endeavors,a="";a=null!==i&&void 0!==i&&i.length?i.map((function(n){return'<p class="content">'+t+" "+n+"</p>"})).join("<hr />"):"<p>No Endeavors spent this lantern year.</p>",this.$buefy.dialog.alert({title:"Endeavors Spent",message:"".concat(a),confirmText:"OK"})}}},p=f,m=(e("d414"),e("0c7c")),g=Object(m["a"])(p,i,a,!1,null,"8faaa54a",null);t["default"]=g.exports}}]);
//# sourceMappingURL=chunk-5913dede.e255da91.js.map