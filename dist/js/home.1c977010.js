(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["home"],{"38ea":function(e,n,t){},"460b":function(e,n,t){"use strict";t.d(n,"f",(function(){return i})),t.d(n,"d",(function(){return s})),t.d(n,"e",(function(){return o})),t.d(n,"b",(function(){return l})),t.d(n,"g",(function(){return c})),t.d(n,"h",(function(){return u})),t.d(n,"a",(function(){return r})),t.d(n,"c",(function(){return a}));var a={active:!0,quarry:null,members:[],state:"setup"},r={expansions:[],active:!0,ended:!1,ending:{year:null,details:null},quarries:[],locations:[],year:0,survival:{max:1},bonuses:{departing:"",arriving:"",other:""},milestones:[{trigger:"First child is born",consequence:"Principle: New Life"},{trigger:"First time death count is updated",consequence:"Principle: Death"},{trigger:"Settlement has 5 innovations",consequence:"Hooded Knight"},{trigger:"Population reaches 15",consequence:"Principle: Society"},{trigger:"Population reaches 0",consequence:"Game Over"}],principles:{new_life:{name:"New Life",choices:["Protect the Young","Survival of the Fittest"],selected:null},death:{name:"Death",choices:["Cannibalize","Graves"],selected:null},society:{name:"Society",choices:["Collective Toil","Accept Darkness"],selected:null},conviction:{name:"Conviction",choices:["Barbaric","Romantic"],selected:null}}},i=["white_lion"],s=[{id:"language",deck:!0,innovated:!1,year:null}],o=["lantern_hoard"],l=[{name:"Returning Survivors",year:1},{name:"Endless Screams",year:2},{name:"Hands of Heat",year:5},{name:"Armored Strangers",year:6},{name:"Phoenix Feather",year:7},{name:"Regal Visit",year:11},{name:"Principle: Conviction",year:12},{name:"Watched",year:20}],c=[{name:"Butcher",level:1,year:4},{name:"King's Man",level:1,year:9},{name:"The Hand",level:1,year:13},{name:"Butcher",level:2,year:16},{name:"King's Man",level:2,year:19},{name:"Butcher",level:3,year:23},{name:"Watcher",level:0,year:25},{name:"King's Man",level:3,year:28},{name:"Gold Smoke Knight",level:0,year:30}],u={stats:{movement:{base:5,other:0},accuracy:{base:0,other:0},strength:{base:0,other:0},evasion:{base:0,other:0},luck:{base:0,other:0},speed:{base:0,other:0}},hunt:{special:{bleed:0},tokens:{movement:{plus:0,minus:0},accuracy:{plus:0,minus:0},strength:{plus:0,minus:0},evasion:{plus:0,minus:0},luck:{plus:0,minus:0},speed:{plus:0,minus:0},other:[]},abilities:{dodge:!1,encourage:!1,surge:!1,dash:!1,endure:!1},actions:{action:!1,movement:!1}},survival:{amount:0,abilities:{dodge:!1,encourage:!1,surge:!1,dash:!1,endure:!1},skipHunt:null},lifetime:{name:null,gender:null,experience:0,born:null,father:null,mother:null,died:null,cause:null,retired:!1,cannot:{fightingArts:!1,survival:!1,hunt:!1},reroll:{available:!1,used:!1},notes:null},defenses:{arms:{value:0,max:0,light:!1,heavy:!1,severe:[]},body:{value:0,max:0,light:!1,heavy:!1,severe:[]},brain:{value:0,max:0,light:!1},head:{value:0,max:0,heavy:!1,severe:[]},legs:{value:0,max:0,light:!1,heavy:!1,severe:[]},waist:{value:0,max:0,light:!1,heavy:!1,severe:[]}},abilities:{abilities:[],disorders:[],fightingArts:[],impairments:[]},mentality:{courage:{level:0,abilities:{stalwart:{name:"Stalwart",granted:!1,description:"Can't be knocked down by brain trauma or intimidate."},prepared:{name:"Prepared",granted:!1,description:"Add Hunt XP to your roll when determining a straggler."},matchmaker:{name:"Matchmaker",granted:!1,description:"Spend 1 endeavor to trigger intimacy story event."}}},understanding:{level:0,abilities:{analyze:{name:"Analyze",granted:!1,description:"Look at the top AI card and return it to the top of the deck."},explore:{name:"Explore",granted:!1,description:"Add +2 to your investigate roll results."},tinker:{name:"Tinker",granted:!1,description:"+1 endeavor when you are a returning survivor."}}}},weapon:{selected:null,proficiency:0}}},"5c15":function(e,n,t){"use strict";t("38ea")},"87ed":function(e,n,t){e.exports=t.p+"img/lantern.21453bec.png"},bb51:function(e,n,t){"use strict";t.r(n);var a=function(){var e=this,n=e.$createElement,a=e._self._c||n;return e.showLoading?e._e():a("div",{staticClass:"column is-12 is-centered"},[e.user?a("div",[a("h1",{staticClass:"title"},[e._v("Select a Campaign")]),a("CampaignList")],1):a("div",[a("img",{attrs:{alt:"Vue logo",src:t("87ed")}}),a("h1",{staticClass:"title"},[e._v("Kingdom Death Management")]),a("h2",{staticClass:"subtitle"},[e._v("Please Login to Continue")]),a("button",{staticClass:"button is-primary",on:{click:function(n){return n.preventDefault(),e.login(n)}}},[e._v("Login with Google")])])])},r=[],i=t("5530"),s=t("2f62"),o=t("dc59"),l=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("div",{staticClass:"columns is-multiline"},e._l(e.campaigns,(function(n){return t("div",{key:n.id,staticClass:"column is-4"},[t("div",{staticClass:"card campaign",on:{click:function(t){return t.preventDefault(),e.selectCampaign(n)}}},[t("header",{staticClass:"card-header"},[t("p",{staticClass:"card-header-title"},[e._v(" "+e._s(n.name)+" ")])]),t("div",{staticClass:"card-content"},[e._v(" Lantern Year "+e._s(n.year)+" "),t("br"),e._v(" "+e._s(n.members.length)+" Players ")])])])})),0),t("hr"),t("CampaignCreate")],1)},c=[],u=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"buttons is-centered"},[t("b-button",{attrs:{size:"is-large","icon-left":"plus-circle",rounded:"",type:"is-primary is-light"},on:{click:function(n){return n.preventDefault(),e.getSettlementName(n)}}},[e._v(" Create New Campaign ")]),t("b-loading",{attrs:{"is-full-page":!0,"can-cancel":!1},model:{value:e.showProgress,callback:function(n){e.showProgress=n},expression:"showProgress"}},[t("b-progress",{attrs:{value:e.createProgressPercent,size:"is-large","show-value":""}},[e._v(" Creating Campaign: "+e._s(e.createProgressPercent)+"% "+e._s(e.progressLabel)+" ")])],1)],1)},d=[],g=(t("4160"),t("b0c0"),t("d3b7"),t("25f0"),t("3ca3"),t("159b"),t("ddb0"),t("96cf"),t("1da1")),m=t("460b"),h={name:"CampaignCreate",data:function(){return{createProgressPercent:0,createProgressItems:0,createProgressDone:0,showProgress:!1,progressLabel:""}},methods:{updateProgress:function(e){this.createProgressDone++,this.progressLabel=e,this.createProgressPercent=Math.round(this.createProgressDone/this.createProgressItems)},getSettlementName:function(){var e=this;this.$buefy.dialog.prompt({message:"Name your Settlement:",inputAttrs:{placeholder:"Settlement Name"},trapFocus:!0,onConfirm:function(n){return e.createCampaign(n)}})},createCampaign:function(e){var n=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n.createProgressPercent=0,n.createProgressDone=0,n.createProgressItems=42+m["f"].length+m["e"].length+m["b"].length+m["g"].length+m["d"].length,n.showProgress=!0,a=m["a"],a.name=e,a.members=[n.user.uid],r=o["a"].collection("campaigns").doc(),r.set(a).then((function(){return n.updateProgress("Creating core campaign data")})),t.next=11,n.populateCampaign(r);case 11:n.showProgress=!1,n.bindCampaign(r.id),n.$router.push({name:"Settlement"});case 14:case"end":return t.stop()}}),t)})))()},populateCampaign:function(e){var n=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var a,r,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(a=[],r={reached:!1,storyEvents:[],settlementEvents:[],showdowns:[],innovation:"",quarry:null,successful:!1},i=0;i<40;i++)console.log("Queueing timeline push: "+i.toString()),s=Object.assign({year:i},r),a.push(e.collection("timeline").doc(i.toString()).set(s).then((function(){return n.updateProgress("Instantiating timeline")})));return console.log("Pushing all years"),t.next=6,Promise.all(a);case 6:e.collection("timeline").doc("0").update({quarry:"White Lion (Prologue)"}),e.collection("timeline").doc("1").update({settlementEvents:o["b"].firestore.FieldValue.arrayUnion("First Story")}),m["f"].forEach((function(t){console.log("Adding Quarry: "+t),e.update({quarries:o["b"].firestore.FieldValue.arrayUnion(t)}).then((function(){return n.updateProgress("Adding quarries")}))})),m["e"].forEach((function(t){console.log("Adding location: "+t),e.update({locations:o["b"].firestore.FieldValue.arrayUnion(t)}).then((function(){return n.updateProgress("Adding locations")}))})),m["b"].forEach((function(t){console.log("Adding event: "+t.name),e.collection("timeline").doc(t.year.toString()).update({storyEvents:o["b"].firestore.FieldValue.arrayUnion(t.name)}).then((function(){return n.updateProgress("Adding default events")}))})),m["g"].forEach((function(t){console.log("Adding Showdown: "+t.name+t.level),e.collection("timeline").doc(t.year.toString()).update({showdowns:o["b"].firestore.FieldValue.arrayUnion({name:t.name,level:t.level})}).then((function(){return n.updateProgress("Adding default showdowns")}))})),m["d"].forEach((function(t){console.log("Adding innovation to deck: "+t.id),e.collection("innovations").doc(t.id).set({deck:t.deck,innovated:t.innovated,year:t.year}).then((function(){return n.updateProgress("Building innovation deck")}))}));case 13:case"end":return t.stop()}}),t)})))()}}},p=h,v=t("0c7c"),f=Object(v["a"])(p,u,d,!1,null,null,null),b=f.exports,y={name:"CampaignList",components:{CampaignCreate:b},data:function(){return{campaigns:[]}},computed:Object(i["a"])({},Object(s["c"])(["user"])),created:function(){var e=this.user.uid;this.$bind("campaigns",o["a"].collection("campaigns").where("members","array-contains",e))},methods:Object(i["a"])(Object(i["a"])({},Object(s["b"])(["bindCampaign"])),{},{selectCampaign:function(e){var n=this;this.bindCampaign(e.id).then((function(){n.$router.push({name:"Settlement"})}))}})},P=y,w=(t("5c15"),Object(v["a"])(P,l,c,!1,null,"23616dd2",null)),C=w.exports,k={name:"Home",components:{CampaignList:C},methods:Object(i["a"])(Object(i["a"])({},Object(s["b"])(["setUser","clearUser"])),{},{login:function(){var e=this,n=new o["b"].auth.GoogleAuthProvider;this.setLoading(!0),o["b"].auth().signInWithRedirect(n).then((function(n){e.setUser(n.user)})).catch((function(e){return console.log(e)}))}})},_=k,S=Object(v["a"])(_,a,r,!1,null,null,null);n["default"]=S.exports}}]);
//# sourceMappingURL=home.1c977010.js.map