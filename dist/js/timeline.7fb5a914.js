(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["timeline"],{2532:function(t,n,e){"use strict";var i=e("23e7"),a=e("5a34"),s=e("1d80"),r=e("ab13");i({target:"String",proto:!0,forced:!r("includes")},{includes:function(t){return!!~String(s(this)).indexOf(a(t),arguments.length>1?arguments[1]:void 0)}})},3835:function(t,n,e){"use strict";function i(t){if(Array.isArray(t))return t}e.d(n,"a",(function(){return o}));e("a4d3"),e("e01a"),e("d28b"),e("d3b7"),e("3ca3"),e("ddb0");function a(t,n){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var e=[],i=!0,a=!1,s=void 0;try{for(var r,o=t[Symbol.iterator]();!(i=(r=o.next()).done);i=!0)if(e.push(r.value),n&&e.length===n)break}catch(c){a=!0,s=c}finally{try{i||null==o["return"]||o["return"]()}finally{if(a)throw s}}return e}}var s=e("06c5");function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,n){return i(t)||a(t,n)||Object(s["a"])(t,n)||r()}},"5a34":function(t,n,e){var i=e("44e7");t.exports=function(t){if(i(t))throw TypeError("The method doesn't accept regular expressions");return t}},"7db0":function(t,n,e){"use strict";var i=e("23e7"),a=e("b727").find,s=e("44d2"),r=e("ae40"),o="find",c=!0,u=r(o);o in[]&&Array(1)[o]((function(){c=!1})),i({target:"Array",proto:!0,forced:c||!u},{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),s(o)},"805a":function(t,n,e){"use strict";e("bae6")},a15b:function(t,n,e){"use strict";var i=e("23e7"),a=e("44ad"),s=e("fc6a"),r=e("a640"),o=[].join,c=a!=Object,u=r("join",",");i({target:"Array",proto:!0,forced:c||!u},{join:function(t){return o.call(s(this),void 0===t?",":t)}})},ab13:function(t,n,e){var i=e("b622"),a=i("match");t.exports=function(t){var n=/./;try{"/./"[t](n)}catch(e){try{return n[a]=!1,"/./"[t](n)}catch(i){}}return!1}},bae6:function(t,n,e){},c975:function(t,n,e){"use strict";var i=e("23e7"),a=e("4d64").indexOf,s=e("a640"),r=e("ae40"),o=[].indexOf,c=!!o&&1/[1].indexOf(1,-0)<0,u=s("indexOf"),l=r("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:c||!u||!l},{indexOf:function(t){return c?o.apply(this,arguments)||0:a(this,t,arguments.length>1?arguments[1]:void 0)}})},d81d:function(t,n,e){"use strict";var i=e("23e7"),a=e("b727").map,s=e("1dde"),r=e("ae40"),o=s("map"),c=r("map");i({target:"Array",proto:!0,forced:!o||!c},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},f67a:function(t,n,e){"use strict";e.r(n);var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return!t.showLoading&&t.user&&t.campaign?e("div",{staticClass:"column"},[e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-12"},[e("h1",{staticClass:"title"},[t._v("Lantern Year "+t._s(t.campaign.year))])])]),t._m(0),t._l(t.timeline,(function(n){return e("div",{key:n.id,ref:"year"+n.id,refInFor:!0,staticClass:"columns timeline-row",class:{current:n.year===t.campaign.year},staticStyle:{position:"relative"},on:{mouseover:function(e){t.activeRow=n.id},focus:function(e){t.activeRow=n.id}}},[e("div",{staticClass:"column is-1"},[t.campaign.year!==n.year&&t.activeRow===n.id?e("b-button",{attrs:{rounded:"",type:"is-info","icon-left":"calendar-check"},on:{click:function(e){return e.preventDefault(),t.changeYear(n.year)}}},[t._v(t._s(n.year))]):e("span",[t._v(t._s(n.year))])],1),e("div",{staticClass:"column is-2"},[t._l(n.storyEvents,(function(n,i){return e("div",{key:i},[e("span",{staticClass:"bl-story-event"}),t._v(" "+t._s(n)+" ")])})),t.activeRow===n.id?e("span",[e("b-button",{attrs:{type:"is-success","icon-right":"plus"},on:{click:function(e){return e.preventDefault(),t.addStoryEvent(n.id)}}})],1):t._e()],2),e("div",{staticClass:"column is-2"},[t._l(n.settlementEvents,(function(n,i){return e("div",{key:i},[e("span",{staticClass:"bl-settlement-event"}),t._v(" "+t._s(n)+" ")])})),t.activeRow===n.id?e("span",[e("b-button",{attrs:{type:"is-success","icon-right":"plus"},on:{click:function(e){return e.preventDefault(),t.addSettlementEvent(n.id)}}})],1):t._e()],2),e("div",{staticClass:"column is-2"},[t._l(n.showdowns,(function(n,i){return e("div",{key:i},[e("span",{staticClass:"bl-nemesis-event"}),t._v(" "+t._s(n.name)+" "),n.level>0?e("span",[t._v(" - Lvl "+t._s(n.level)+" ")]):t._e()])})),t.activeRow===n.id?e("span",[e("b-button",{attrs:{type:"is-success","icon-right":"plus"},on:{click:function(e){return e.preventDefault(),t.addShowdown(n.id)}}})],1):t._e()],2),e("div",{staticClass:"column is-2"},t._l(t.innovatedByYear[n.id],(function(n){return e("div",{key:n.id},[e("b-icon",{attrs:{icon:"flask","custom-size":"xs"}}),n.innovation?e("span",[t._v(t._s(n.innovation.name))]):e("span",[t._v(t._s(n.id))])],1)})),0),e("div",{staticClass:"column is-2"},[n.quarry?e("span",[e("div",[e("span",{staticClass:"bl-nemesis-event"}),t._v(" "),e("span",[t._v(t._s(n.quarry))])]),e("b-checkbox",{attrs:{size:"is-small",type:"is-info"},on:{input:function(e){return t.flagSuccess(n.id,e)}},model:{value:n.successful,callback:function(e){t.$set(n,"successful",e)},expression:"ly.successful"}},[t._v("Successful Hunt")])],1):t.activeRow===n.id?e("span",[e("b-field",[e("b-select",{attrs:{placeholder:"Quarry"},model:{value:t.selectingQuarry,callback:function(n){t.selectingQuarry=n},expression:"selectingQuarry"}},t._l(t.campaignQuarries,(function(n){return e("option",{key:n.id,domProps:{value:n.name}},[t._v(t._s(n.name))])})),0),e("b-select",{attrs:{placeholder:"Lv."},model:{value:t.sQLevel,callback:function(n){t.sQLevel=n},expression:"sQLevel"}},t._l([1,2,3],(function(n){return e("option",{key:n,domProps:{value:n}},[t._v(t._s(n))])})),0),e("b-button",{attrs:{type:"is-success","icon-right":"plus"},on:{click:function(e){return e.preventDefault(),t.confirmQuarry(n.id)}}})],1)],1):t._e()]),e("div",{staticClass:"column is-1"},[e("a",{staticClass:"bl-endeavor is-size-2",staticStyle:{color:"black"},on:{click:function(e){return e.preventDefault(),t.showEndeavors(n.id)}}})])])}))],2):t._e()},a=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"columns header"},[e("div",{staticClass:"column is-1"},[t._v("Year")]),e("div",{staticClass:"column is-2"},[t._v("Story and Special Events")]),e("div",{staticClass:"column is-2"},[t._v("Settlement Event")]),e("div",{staticClass:"column is-2"},[t._v("Special Showdown")]),e("div",{staticClass:"column is-2"},[t._v("Innovated")]),e("div",{staticClass:"column is-2"},[t._v("Quarry")]),e("div",{staticClass:"column is-1"},[t._v("Endeavors")])])}],s=(e("4de4"),e("7db0"),e("4160"),e("caad"),e("c975"),e("a15b"),e("d81d"),e("d3b7"),e("ac1f"),e("25f0"),e("2532"),e("1276"),e("498a"),e("159b"),e("3835")),r=e("5530"),o=e("2f62"),c=e("dc59"),u={name:"Timeline",data:function(){return{activeRow:null,loadingComponents:{},selectingQuarry:null,sQLevel:null}},computed:Object(r["a"])(Object(r["a"])({},Object(o["c"])(["innovated","quarries","timeline","innovations"])),{},{campaignQuarries:function(){var t=this;return this.quarries.filter((function(n){return t.campaign.quarries.includes(n.id)}))},innovatedByYear:function(){var t=this;if(!this.innovated)return[];var n=this.innovated.map((function(t){return t.year})).filter((function(t,n,e){return e.indexOf(t)===n&&null!==t})),e={};return n.forEach((function(n){n in e||(e[n.toString()]=[]),t.innovated.filter((function(t){return t.year===n})).forEach((function(i){i.innovation=t.innovations.find((function(t){return i.id===t.id})),e[n.toString()].push(i)}))})),e}}),methods:{setYearLoading:function(t,n){this.loadingComponents[t]||!n?n||(this.loadingComponents[t].close(),delete this.loadingComponents[t]):this.loadingComponents[t]=this.$buefy.loading.open({container:this.$refs["year"+t][0]})},addStoryEvent:function(t){var n=this;this.$buefy.dialog.prompt({message:"Add Story Event to Lantern Year "+t+":",inputAttrs:{required:!0},trapFocus:!0,onConfirm:function(e){n.setYearLoading(t,!0),c["a"].collection("campaigns/".concat(n.campaign.id,"/timeline")).doc(t.toString()).update({storyEvents:c["b"].firestore.FieldValue.arrayUnion(e)}).then((function(){n.setYearLoading(t,!1)}))}})},addSettlementEvent:function(t){var n=this;this.$buefy.dialog.prompt({message:"Add Settlement Event to Lantern Year "+t+":",inputAttrs:{required:!0},trapFocus:!0,onConfirm:function(e){n.setYearLoading(t,!0),c["a"].collection("campaigns/".concat(n.campaign.id,"/timeline")).doc(t.toString()).update({settlementEvents:c["b"].firestore.FieldValue.arrayUnion(e)}).then((function(){n.setYearLoading(t,!1)}))}})},addShowdown:function(t){var n=this;this.$buefy.dialog.prompt({message:"Add Showdown to Lantern Year "+t+': <p class="is-size-7">You can include a level separated by a colon (":").</p>',inputAttrs:{required:!0},trapFocus:!0,onConfirm:function(e){n.setYearLoading(t,!0);var i=e.trim().split(":"),a=Object(s["a"])(i,2),r=a[0],o=a[1];o||(o=0),c["a"].collection("campaigns/".concat(n.campaign.id,"/timeline")).doc(t.toString()).update({showdowns:c["b"].firestore.FieldValue.arrayUnion({name:r,level:o})}).then((function(){n.setYearLoading(t,!1)}))}})},confirmQuarry:function(t){var n=this;this.setYearLoading(t,!0),c["a"].collection("campaigns/".concat(this.campaign.id,"/timeline")).doc(t.toString()).update({quarry:this.selectingQuarry+" Lv. "+this.sQLevel}).then((function(){n.selectingQuarry=null,n.sQLevel=null,n.setYearLoading(t,!1)}))},flagSuccess:function(t,n){var e=this;this.setYearLoading(t,!0),c["a"].collection("campaigns/".concat(this.campaign.id,"/timeline")).doc(t.toString()).update({successful:n}).then((function(){e.setYearLoading(t,!1)}))},changeYear:function(t){var n=this;this.$buefy.dialog.confirm({message:"Change to Lantern Year "+t+"?",onConfirm:function(){c["a"].collection("campaigns").doc(n.campaign.id).update({year:t})}})},showEndeavors:function(t){var n='<span class="bl-endeavor"></span>',e=this.timeline[t],i=e.endeavors,a="";a=null!==i&&void 0!==i&&i.length?i.map((function(t){return'<p class="content">'+n+" "+t+"</p>"})).join("<hr />"):"<p>No Endeavors spent this lantern year.</p>",this.$buefy.dialog.alert({title:"Endeavors Spent",message:"".concat(a),confirmText:"OK"})}}},l=u,d=(e("805a"),e("0c7c")),f=Object(d["a"])(l,i,a,!1,null,"3755cc78",null);n["default"]=f.exports}}]);
//# sourceMappingURL=timeline.7fb5a914.js.map