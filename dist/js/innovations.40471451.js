(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["innovations"],{"06c5":function(t,n,i){"use strict";i.d(n,"a",(function(){return e}));i("a630"),i("fb6a"),i("b0c0"),i("d3b7"),i("25f0"),i("3ca3");var o=i("6b75");function e(t,n){if(t){if("string"===typeof t)return Object(o["a"])(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Object(o["a"])(t,n):void 0}}},"25f0":function(t,n,i){"use strict";var o=i("6eeb"),e=i("825a"),a=i("d039"),s=i("ad6d"),r="toString",c=RegExp.prototype,l=c[r],d=a((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),u=l.name!=r;(d||u)&&o(RegExp.prototype,r,(function(){var t=e(this),n=String(t.source),i=t.flags,o=String(void 0===i&&t instanceof RegExp&&!("flags"in c)?s.call(t):i);return"/"+n+"/"+o}),{unsafe:!0})},2909:function(t,n,i){"use strict";i.d(n,"a",(function(){return c}));var o=i("6b75");function e(t){if(Array.isArray(t))return Object(o["a"])(t)}i("a4d3"),i("e01a"),i("d28b"),i("a630"),i("d3b7"),i("3ca3"),i("ddb0");function a(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var s=i("06c5");function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return e(t)||a(t)||Object(s["a"])(t)||r()}},"4df4":function(t,n,i){"use strict";var o=i("0366"),e=i("7b0b"),a=i("9bdd"),s=i("e95a"),r=i("50c4"),c=i("8418"),l=i("35a1");t.exports=function(t){var n,i,d,u,v,f,p=e(t),m="function"==typeof this?this:Array,b=arguments.length,g=b>1?arguments[1]:void 0,h=void 0!==g,y=l(p),_=0;if(h&&(g=o(g,b>2?arguments[2]:void 0,2)),void 0==y||m==Array&&s(y))for(n=r(p.length),i=new m(n);n>_;_++)f=h?g(p[_],_):p[_],c(i,_,f);else for(u=y.call(p),v=u.next,i=new m;!(d=v.call(u)).done;_++)f=h?a(u,g,[d.value,_],!0):d.value,c(i,_,f);return i.length=_,i}},"6b75":function(t,n,i){"use strict";function o(t,n){(null==n||n>t.length)&&(n=t.length);for(var i=0,o=new Array(n);i<n;i++)o[i]=t[i];return o}i.d(n,"a",(function(){return o}))},"7db0":function(t,n,i){"use strict";var o=i("23e7"),e=i("b727").find,a=i("44d2"),s=i("ae40"),r="find",c=!0,l=s(r);r in[]&&Array(1)[r]((function(){c=!1})),o({target:"Array",proto:!0,forced:c||!l},{find:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}}),a(r)},"8dc7":function(t,n,i){"use strict";i("ae94")},"9bdd":function(t,n,i){var o=i("825a"),e=i("2a62");t.exports=function(t,n,i,a){try{return a?n(o(i)[0],i[1]):n(i)}catch(s){throw e(t),s}}},"9cec":function(t,n,i){"use strict";i("f4ac")},a630:function(t,n,i){var o=i("23e7"),e=i("4df4"),a=i("1c7e"),s=!a((function(t){Array.from(t)}));o({target:"Array",stat:!0,forced:s},{from:e})},ad6d:function(t,n,i){"use strict";var o=i("825a");t.exports=function(){var t=o(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.dotAll&&(n+="s"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}},ae94:function(t,n,i){},b0c0:function(t,n,i){var o=i("83ab"),e=i("9bf2").f,a=Function.prototype,s=a.toString,r=/^\s*function ([^ (]*)/,c="name";o&&!(c in a)&&e(a,c,{configurable:!0,get:function(){try{return s.call(this).match(r)[1]}catch(t){return""}}})},bec2:function(t,n,i){"use strict";i.r(n);var o=function(){var t=this,n=t.$createElement,i=t._self._c||n;return!t.showLoading&&t.user&&t.campaign?i("div",{staticClass:"column is-12"},[i("div",{staticClass:"columns is-multiline"},[i("div",{staticClass:"column is-12"},[i("h1",{staticClass:"title"},[t._v(" Innovations Researched "),i("b-field",{staticClass:"is-pulled-right",staticStyle:{"margin-top":".25em"},attrs:{label:"Sort by","label-position":"on-border"}},[i("b-select",{attrs:{icon:"sort"},model:{value:t.sortBy,callback:function(n){t.sortBy=n},expression:"sortBy"}},[i("option",{attrs:{value:"year"}},[t._v("Lantern Year Innovated")]),i("option",{attrs:{value:"name"}},[t._v("Innovation Name")])])],1)],1)]),0===t.researched.length?i("div",{staticClass:"column is-12"},[t._v(" Your settlement has not gained any innovations yet. ")]):t._e(),t._l(t.researched,(function(n){return i("div",{key:n.id,staticClass:"column is-3"},[n.innovation?i("article",{staticClass:"panel innovation",class:t.category[n.innovation.category],attrs:{id:n.id}},[i("div",{staticClass:"panel-heading"},[i("b-tooltip",{staticClass:"is-pulled-left",attrs:{label:"Lantern Year Innovated",position:"is-top",type:"is-dark"}},[i("b-button",{staticClass:"is-pulled-left",attrs:{rounded:"",type:"is-dark",size:"is-small"}},[i("strong",[t._v(t._s(n.year))])])],1),i("b-tooltip",{attrs:{label:t.capitalize(n.innovation.category),type:"is-dark",position:"is-top"}},[i("b-icon",{attrs:{icon:t.icon[n.innovation.category],size:"is-small"}})],1),i("span",{staticClass:"is-size-6",staticStyle:{"margin-left":".5em"}},[t._v(t._s(n.innovation.name))]),i("b-dropdown",{staticClass:"is-pulled-right",attrs:{"aria-role":"list",position:"is-bottom-left"}},[i("b-button",{attrs:{slot:"trigger",type:t.category[n.innovation.category]},slot:"trigger"},[i("b-icon",{attrs:{icon:"ellipsis-h"}})],1),i("b-dropdown-item",{attrs:{"aria-role":"listItem"},on:{click:function(i){return t.returnToDeck(n)}}},[i("b-icon",{attrs:{icon:"trash-alt",size:"is-small",type:"is-danger"}}),t._v("Return to Deck")],1)],1)],1),i("div",{staticClass:"panel-block"},[i("InnovationDesc",{attrs:{innovation:n.innovation}})],1),n.innovation.consequences?i("div",{staticClass:"panel-block"},[i("p",[t._v("Added "),i("strong",[t._v(t._s(n.innovation.consequences.length))]),t._v(" innovations to the deck.")])]):t._e()]):i("article",[t._v("WARNING: No Innovation Found for "+t._s(n.id))])])})),t._m(0),t.showDeck?i("div",{staticClass:"column is-12"},[i("div",{staticClass:"columns is-multiline"},[t.showDeck?i("div",{staticClass:"column is-12"},[i("h1",{staticClass:"title"},[t._v("In Deck")])]):t._e(),t._l(t.deck,(function(n){return i("div",{key:n.id,staticClass:"column is-3"},[i("article",{staticClass:"panel",class:t.category[n.innovation.category]},[i("div",{staticClass:"panel-heading"},[i("b-tooltip",{attrs:{label:t.capitalize(n.innovation.category),type:"is-dark",position:"is-top"}},[i("b-icon",{attrs:{icon:t.icon[n.innovation.category],size:"is-small"}})],1),i("span",{staticClass:"is-size-6"},[t._v(t._s(n.innovation.name))]),i("b-dropdown",{staticClass:"is-pulled-right",attrs:{"aria-role":"list",position:"is-bottom-left"}},[i("b-button",{attrs:{slot:"trigger",type:t.category[n.innovation.category]},slot:"trigger"},[i("b-icon",{attrs:{icon:"ellipsis-h"}})],1),i("b-dropdown-item",{attrs:{"aria-role":"listItem"},on:{click:function(i){return t.researchInnovation(n)}}},[i("b-icon",{attrs:{icon:"plus-square",size:"is-small",type:"is-success"}}),t._v("Research")],1),i("b-dropdown-item",{attrs:{"aria-role":"listItem"},on:{click:function(i){return t.removeFromDeck(n)}}},[i("b-icon",{attrs:{icon:"trash-alt",size:"is-small",type:"is-danger"}}),t._v("Remove")],1)],1)],1)])])})),i("div",{staticClass:"column is-12"},[i("b-button",{attrs:{type:"is-warning","icon-left":"exclamation-circle"},on:{click:t.promptAdd}},[t._v("Add Any Innovation To Deck")]),i("b-modal",{attrs:{"has-modal-card":"","trap-focus":"","destroy-on-hide":!1,"aria-role":"dialog","aria-modal":""},scopedSlots:t._u([{key:"default",fn:function(n){return[i("InnovationAdd",{attrs:{innovations:t.innovations,campaign:t.campaign},on:{close:n.close,add:t.addToDeck}})]}}],null,!1,57795896),model:{value:t.showAddInnovation,callback:function(n){t.showAddInnovation=n},expression:"showAddInnovation"}})],1)],2)]):i("div",{staticClass:"column is-12"},[i("b-button",{attrs:{type:"is-info",expanded:""},on:{click:function(n){n.preventDefault(),t.showDeck=!0}}},[t._v("Show Innovation Deck")])],1)],2)]):t._e()},e=[function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"column is-12"},[i("hr")])}],a=(i("4de4"),i("7db0"),i("4160"),i("d81d"),i("b0c0"),i("159b"),i("5530")),s=i("2f62"),r=i("dc59"),c=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"modal-card",staticStyle:{width:"auto"}},[i("header",{staticClass:"modal-card-head"},[i("p",{staticClass:"modal-card-title"},[t._v("Add Innovation")]),i("button",{staticClass:"delete",attrs:{type:"button"},on:{click:t.close}})]),i("section",{staticClass:"modal-card-body"},[i("p",{staticClass:"content"},[t._v(" Select an Innovation to add to your Innovation Deck. "),i("b-message",{attrs:{type:"is-warning"}},[t._v("This list contains all innovations.")])],1),i("b-field",{attrs:{label:"Innovation","label-position":"on-border"}},[i("b-select",{attrs:{placeholder:"Add Innovation",icon:"flask",required:"",expanded:""},model:{value:t.innovation,callback:function(n){t.innovation=n},expression:"innovation"}},t._l(t.innovations,(function(n){return i("option",{key:n.id,domProps:{value:n.id}},[t._v(t._s(n.name))])})),0)],1)],1),i("footer",{staticClass:"modal-card-foot"},[i("button",{staticClass:"button",attrs:{type:"button"},on:{click:t.close}},[t._v("Cancel")]),i("button",{staticClass:"button is-success",on:{click:t.select}},[t._v("Add Innovation")])])])},l=[],d={name:"AddInnovation",props:["innovations","campaign"],data:function(){return{innovation:null}},methods:{select:function(){var t=this.innovation;this.innovation=null,this.$emit("add",t)},close:function(){this.innovation=null,this.$emit("close")}}},u=d,v=i("0c7c"),f=Object(v["a"])(u,c,l,!1,null,null,null),p=f.exports,m=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"content inno-fields"},[t.innovation.flavor?i("div",{staticClass:"flavor",domProps:{innerHTML:t._s(t.innovation.flavor)}}):t._e(),t.innovation.provides?i("div",t._l(t.innovation.provides,(function(n){return i("b-button",{key:n,staticClass:"yellow-box is-static",attrs:{expanded:"",type:"is-dark"},on:{click:function(t){t.preventDefault()}}},[i("strong",[t._v(t._s(n))])])})),1):t._e(),t.innovation.increaseLimit?i("div",[i("b-button",{staticClass:"brown-box is-static",attrs:{expanded:"",type:"is-dark"},on:{click:function(t){t.preventDefault()}}},[i("strong",[t._v("+1 Survival Limit")])])],1):t._e(),t.innovation.departingSurvival?i("div",[i("strong",[t._v("Departing Survivors")]),t._v(" gain +1 survival. ")]):t._e(),t.innovation.description?i("div",{domProps:{innerHTML:t._s(t.innovation.description)}}):t._e(),t.innovation.actions?i("div",t._l(t.innovation.actions,(function(t){return i("Action",{key:t.name,attrs:{action:t}})})),1):t._e(),t.innovation.build?i("div",t._l(t.innovation.build,(function(n){return i("div",{key:n.name,staticClass:"box build"},[i("div",{staticClass:"level"},[i("div",{staticClass:"level-left"},[i("div",{staticClass:"level-item"},[t._l(t.getRange(n.cost),(function(t){return i("a",{key:t,staticClass:"bl-endeavor is-size-3",staticStyle:{color:"black",background:"white","border-radius":"5em"},on:{click:function(t){t.preventDefault()}}},[i("br")])})),i("strong",[t._v("Build")])],2),i("div",{staticClass:"level-item"},[t._v(" "+t._s(n.name)+" ")])]),i("div",{staticClass:"level-right"},[i("div",{staticClass:"content"},t._l(n.resources,(function(n){return i("div",{key:n.material,staticClass:"field"},[i("div",{staticClass:"control"},[i("div",{staticClass:"tags has-addons"},[i("span",{staticClass:"tag is-dark"},[t._v(t._s(n.qty)+"x")]),i("span",{staticClass:"tag is-black"},[t._v(t._s(n.material))])])])])})),0)])])])})),0):t._e()])},b=[],g=(i("d3b7"),i("ddb0"),i("2909")),h=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"action content"},[i("section",{staticClass:"field is-grouped",staticStyle:{width:"100%"}},[i("p",{staticClass:"left light-brown"},t._l(t.action.cost,(function(t){return i("a",{key:t,staticClass:"bl-endeavor is-size-3",staticStyle:{color:"black",background:"white","border-radius":"5em"}},[i("br")])})),0),i("p",{staticClass:"right brown"},[t.action.name?i("strong",[t._v(t._s(t.action.name)+" â€” ")]):t._e(),t.action.description?i("span",{domProps:{innerHTML:t._s(t.action.description)}}):t._e()])]),t.action.results?i("table",{staticClass:"table is-striped"},[i("tbody",t._l(t.action.results,(function(n,o){return i("tr",{key:o},[i("td",{staticClass:"left",domProps:{innerHTML:t._s(n.roll)}}),i("td",{staticClass:"right",domProps:{innerHTML:t._s(n.result)}})])})),0)]):t._e()])},y=[],_={name:"Action",props:["action"]},k=_,C=(i("ed8b"),Object(v["a"])(k,h,y,!1,null,null,null)),w=C.exports,A={name:"InnovationDescription",props:["innovation"],components:{Action:w},methods:{getRange:function(t){return Object(g["a"])(Array(t).keys())}}},I=A,S=(i("9cec"),Object(v["a"])(I,m,b,!1,null,null,null)),D=S.exports,x={name:"Innovations",data:function(){return{showDeck:!1,showAddInnovation:!1,sortBy:"year"}},components:{InnovationAdd:p,InnovationDesc:D},computed:Object(a["a"])(Object(a["a"])({},Object(s["c"])(["innovations","innovated"])),{},{category:function(){return{starting:"is-black",science:"is-info",home:"is-danger",education:"is-success",faith:"is-light",art:"is-warning",music:"is-primary",other:"is-white"}},icon:function(){return{starting:"seedling",science:"flask",home:"home",education:"book-open",faith:"cross",art:"theater-masks",music:"music",other:"star"}},researched:function(){var t=this;return this.innovated.filter((function(t){return t.innovated})).map((function(n){return n.innovation=t.innovations.find((function(t){return t.id===n.id})),n})).sort((function(n,i){return n[t.sortBy]>i[t.sortBy]?1:i[t.sortBy]>n[t.sortBy]?-1:0}))},deck:function(){var t=this;return this.innovated.filter((function(t){return t.deck})).map((function(n){return n.innovation=t.innovations.find((function(t){return t.id===n.id})),n}))}}),methods:{innovatedThisYear:function(){var t=this;return this.innovated.filter((function(n){return n.year===t.campaign.year})).length>0},returnToDeck:function(t){var n=this;this.$buefy.dialog.confirm({message:"Are you sure?  This is a relatively rare event.  <br /><em>This will NOT remove any consequences of this Innovation from the deck.</em>",trapFocus:!0,closeOnConfirm:!0,onConfirm:function(){n.setLoading(!0),r["a"].collection("campaigns/".concat(n.campaign.id,"/innovations")).doc(t.id).update({deck:!0,innovated:!1,year:null}).then((function(){return n.setLoading(!1)}))}})},removeFromDeck:function(t){var n=this;this.$buefy.dialog.confirm({message:"Are you sure?  Removing Innovations from the deck is very rare.",trapFocus:!0,closeOnConfirm:!0,onConfirm:function(){n.setLoading(!0),r["a"].collection("campaigns/".concat(n.campaign.id,"/innovations")).doc(t.id).delete().then((function(){return n.setLoading(!1)}))}})},addToDeck:function(t){var n=this;this.showAddInnovation=!1,r["a"].collection("campaigns/".concat(this.campaign.id,"/innovations")).doc(t).set({deck:!0,innovated:!1,year:null}).then((function(){return n.$buefy.toast.open({message:"Added card to Innovation deck."})}))},promptAdd:function(){var t=this;this.$buefy.dialog.confirm({message:"This is pretty rare.  Are you sure?",trapFocus:!0,closeOnConfirm:!0,onConfirm:function(){t.showAddInnovation=!0}})},researchInnovation:function(t){var n=this,i=this.innovations.find((function(n){return t.id===n.id})),o="Research <strong>".concat(i.name,"</strong>?");this.innovatedThisYear()&&(o="Research <strong>".concat(i.name,"</strong>? <br /><em>You have already Innovated this year.  Make sure this is on purpose.</em>")),this.$buefy.dialog.confirm({message:o,trapFocus:!0,closeOnConfirm:!0,onConfirm:function(){var o;n.setLoading(!0),r["a"].collection("campaigns/".concat(n.campaign.id,"/innovations")).doc(t.id).update({deck:!1,innovated:!0,year:n.campaign.year}).then((function(){return n.setLoading(!1)})),null!==(o=i.consequences)&&void 0!==o&&o.length&&i.consequences.forEach((function(t){n.addToDeck(t)}))}})}}},O=x,T=(i("8dc7"),Object(v["a"])(O,o,e,!1,null,null,null));n["default"]=T.exports},d28b:function(t,n,i){var o=i("746f");o("iterator")},d81d:function(t,n,i){"use strict";var o=i("23e7"),e=i("b727").map,a=i("1dde"),s=i("ae40"),r=a("map"),c=s("map");o({target:"Array",proto:!0,forced:!r||!c},{map:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}})},ded9:function(t,n,i){},e01a:function(t,n,i){"use strict";var o=i("23e7"),e=i("83ab"),a=i("da84"),s=i("5135"),r=i("861d"),c=i("9bf2").f,l=i("e893"),d=a.Symbol;if(e&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var u={},v=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),n=this instanceof v?new d(t):void 0===t?d():d(t);return""===t&&(u[n]=!0),n};l(v,d);var f=v.prototype=d.prototype;f.constructor=v;var p=f.toString,m="Symbol(test)"==String(d("test")),b=/^Symbol\((.*)\)[^)]+$/;c(f,"description",{configurable:!0,get:function(){var t=r(this)?this.valueOf():this,n=p.call(t);if(s(u,t))return"";var i=m?n.slice(7,-1):n.replace(b,"$1");return""===i?void 0:i}}),o({global:!0,forced:!0},{Symbol:v})}},ed8b:function(t,n,i){"use strict";i("ded9")},f4ac:function(t,n,i){}}]);
//# sourceMappingURL=innovations.40471451.js.map